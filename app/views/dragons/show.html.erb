<%= cl_image_tag @dragon.image.key, class: 'w-100', style: 'height: 400px; object-fit: cover;' %>
<div class="container">
  <div class='mt-3 d-flex justify-content-between align-items-center row'>
    <div class="col-0 col-md-6">
      <h1 class='display-1 mb-0', style='font-weight:900'><%= @dragon.name %></h1>
    </div>
    <div class="col-0 col-md-2 mt-2 px-2">
      <div class='d-flex align-items-center'>
        <%= (@dragon.user.image.attached? ? (cl_image_tag @dragon.user.image.key, class: 'rounded-circle me-3', style: 'width: 50px; height: 50px; object-fit: cover;') : (image_tag('bilbo.webp', class: 'rounded-circle me-3', style: 'width: 50px; height: 50px; object-fit: cover;'))) %>
        <div>Hosted by <br><strong><%= @dragon.user.username %></strong></div>
      </div>
    </div>
  </div>
  <hr/>
  <div  class="row justify-content-between">
    <div class="col-0 col-md-8">
      <div class='mt-2 row justify-content-between align-items-center text-center'>
        <div class='col-0 col-md-3'>
          <h3 class='mb-3' style='font-weight:900'><i class="fa-solid fa-location-dot text-danger"></i> <%= @dragon.location %></h3>
        </div>
        <div class='col-0 col-md-3'>
          <h4 class='mb-3 text-right' style='font-weight:600'><i class="fa-brands fa-d-and-d"></i> <%= @dragon.category %></h4>
        </div>
        <div class='col-0 col-md-3'>
          <h5 class='mb-3 text-right'><%= @dragon.age %> years</h5>
        </div>
          <hr/>
        </div>
          <p class='my-1 text-justify'><%= @dragon.description %></p>
      <hr/>
    </div>

    <div class="col-0 col-md-4 d-flex justify-content-center align-items-center mb-3">
      <div class='mx-3 d-flex align-items-center flex-column rounded-5 bg-light py-3 px-5 shadow '>
        <div class="text-center">
          <h3 class='my-3 py-3'><strong><%= @dragon.price_per_day %>â‚¬</strong> / day</h3>
        </div>
        <div>
          <% unless current_user == @dragon.user %>
            <%= link_to "Book now !", new_dragon_booking_path(@dragon), class:"btn btn-primary w-100 mb-3 border-top rounded-5 px-5 shadow" %>
          <% end %>
          </div>
        </div>
      </div>
  </div>

  <div class="d-flex justify-content-between align-items-center">
    <% if current_user == @dragon.user %>
      <%= link_to 'Edit this dragon', edit_dragon_path(@dragon), class: 'btn btn-outline-primary w-100 m-3'%>
      <% if @bookings.size == 0 %>
        <%= link_to 'Delete this dragon', dragon_path(@dragon), class: 'btn btn-outline-danger w-100 m-3', data: {turbo_method: :delete, turbo_confirm: "Are you sure?"} %>
      <% else %>
        <%= link_to "You can't delete a dragon with active bookings", dragon_path(@dragon), class: 'btn btn-outline-secondary w-100 disabled m-3', data: {turbo_method: :delete, turbo_confirm: "Are you sure?"} %>
      <% end %>
    <% end %>
  </div>
</div>
